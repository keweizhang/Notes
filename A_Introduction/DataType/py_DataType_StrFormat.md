# 格式化方法

## 三种方法简介

### `%-formatting`格式符

该方法与C语言语法类似，最为经典，使用 `%` 用来占位，进行字符串内容的格式化

:information_source: 语法：`str = "Answer is %5d." % (10)`

:warning: 缺点：如果字符串较长或较多的参数，那么可读性和可维护性就变得很差

### `str.format()`方法

该方法，用 `{:}` 占位，冒号后为格式，方法内为被格式的内容

:information_source: 语法：`str = "Answer is {:5.2f}.".format(10.1)`, 该方法为 python 2.6 引入的新方法，更为方便，可读性更强，不依赖于位置传参

:warning: 缺点：字典传参基本是要重写一遍名字，不够优雅，且代码运行效率比较低

### `f-string`表达式 :star:

格式化字符串常量**formatted string literals**是 Python 3.6 新引入的一种字符串格式化方法，使用`f`或`F`引领字符串，`' '`内是整个字符串，`{}`内包含要替换的字符串字段

`f-string`在本质上并不是字符串常量，`{}`内是一个在运行时运算求值的表达式

:information_source: 语法：`str = f'Answer is {10.1:5.2f}.'`，或者直接放在`print()`函数内

:information_source: 性能优于前面两种方法，且使用起来也更加简洁明了

## `f-string`用法

### 简单使用

1. `f-string`用大括号 `{}` 表示被替换字段，其中直接填入替换内容

2. `{}`中的内容可以为数据、变量、表达式、函数、方法，会将其运行结果填入替换内容


### 引号

1. 大括号`{}`内所用的引号不能和大括号外的引号定界符冲突,可根据情况灵活切换`'`和`"`

2. 若`'`和`"`不足以满足要求，还可以使用`'''`和`"""`

3. 大括号外的引号可以使用`\`转义，但**大括号内不能使用**`\`转义

### 大括号

1. 大括号外如果需要显示大括号，则应输入连续两个大括号`{{`和`}}`

```python
>>> f'{{5}} {"stars"}'
# 输出
'{5} stars'
```

### 反斜杠

1. 大括号内不允许出现`\`

2. 如果确实需要`\`，则应首先将包含`\`的赋给变量，再在大括号内使用变量

### 多行字符串

感觉没啥用，还是多几个字符串变量，更易读，更好理解

### `lambda`表达式

1. 大括号内也可填入`lambda`表达式

2. `lambda`表达式的`:`会被`f-string`误认为是格式符之前的分隔符,为避免歧义，需要将`lambda`表达式置于括号`()`内

```python
>>> f'result is {(lambda x: x**2 +1)(2)}'
# 输出以下结果
'result is 5'
```